<!doctype html> <html> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name=google-site-verification content=XsLoNHGByzH5FTYq6wYNWXDHE4OIjic0VHrKAJtC4PY /> <link rel=alternate href="http://khalilgharbaoui.codez.it" hreflang=en-nl /> <link rel=alternate href="http://khalilgharbaoui.codez.it" hreflang=en-ch /> <title>Khalil Gharbaoui | ReactJS Roller Coaster!</title> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href='//fonts.googleapis.com/css?family=Lato:300,400' rel=stylesheet> <link rel=stylesheet href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css"> <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel=stylesheet integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin=anonymous> <link href="../stylesheets/site.css" rel=stylesheet /><link href="../stylesheets/syntax.css" rel=stylesheet /> <script src="../javascripts/includes.js"></script> <script src="../javascripts/all.js"></script> <script src="//cdn.jsdelivr.net/jquery.infinitescroll/2.1.0/jquery.infinitescroll.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script> <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76416856-1', 'auto');
      ga('send', 'pageview');

    </script> </head> <body> <header> <span class="logo big-menu"><a href="/">KG</a></span> <span id=about-me-button class="toggle-stamp-button big-menu">about me</span> <span id=my-work-button class=big-menu><a href="/my-work/">my work</a></span> <span id=resume-button class=big-menu><a href="/resume/">resume</a></span> <span id=blog-button class=big-menu><a href="/blog/">blog</a></span> <span id=contact-button class=big-menu><a href="/contact/">contact</a></span> <span id=back-button class=big-menu><a href="javascript:history.back()">Back</a></span> <nav id=nav-mobile> <span class=logo><a href="/">KG</a></span> <span id=about-me-button class=toggle-stamp-button>about me</span> <span id=my-work-button><a href="/my-work/">my work</a></span> <span id=resume-button><a href="/resume/">resume</a></span> <span id=blog-button><a href="/blog/">blog</a></span> <span id=contact-button><a href="/contact/">contact</a></span> <span id=back-button><a href="javascript:history.back()">Back</a></span> </nav> </header> <style>img{width: 100% !important; margin: 0;} h1{font-size:40px;}</style> <div class=box id=main role=main style="background-color:#Fff !important;"> <div style="padding:20px;"> <h1>ReactJS Roller Coaster!</h1> <p><img title="ReactJS FluxJS NodeJS GulpJS JavaScript ES6" alt="ReactJS FluxJS NodeJS GulpJS JavaScript ES6" src="../images/ReactJS-FluxJS-NodeJS-GulpJS-ES6.png"/></p> <p>ReactJS was like riding a roller coasterüåÄ At first. But i managed to find some solid ground and get into more advanced concepts like Flux.</p> <p>Today i created my own Flux Boilerplate combining ReactJS with Flux, ES6, NodeJS and Gulp.</p> <p><img alt=flux-architecture src="../images/flux-architecture.png "Flux architecture" style="width:320px !important;"/></p> <p>Feel free to check it out: <a title="Flux Boilerplate" href="https://github.com/khalilgharbaoui/flux-boilerplate">Flux Boilerplate</a></p> <h2>What it finally all came down to is:</h2> <p>It&rsquo;s all just JavaScript! With files in different places. Callbacks coming and going from one place to the other. Following each step and console logging it&hellip; i got the Flux structure down and it all made some sense.</p> <h2>Movie Flux</h2> <p>So after a lot of googling i managed to make my first flux project:</p> <p><a href="https://github.com/khalilgharbaoui/movie-reactjs-flux">Movie Flux</a></p> <p>demo:</p> <p><a href="http://movie-flux.netlify.com/">http://movie-flux.netlify.com/</a></p> <h2>Gulp!??ü§î</h2> <p>Besides ReactJS and the architecture of Flux, i came across an interesting task runner that uses NodeJS to make a developer friendly productive environment it&rsquo;s called Gulp and it does not sucküòù.</p> <p>I used Webpack to bundle stuff before, but Gulp is as easy as drinking a cold milkshake on a hot summer day.</p> <p>The syntax is strait forward. And you can do a lot more with less code.</p> <p>Basically what you can tell Gulp to do is:</p> <ol> <li><p>Find all the JS files (ReactJS Components for example.) and translate them from ES6 syntax to browser readable syntax.</p></li> <li><p>Bundle them all together and make 1 big compressed main JS file out of them. (some ppl call it bundle.js or main.js)</p></li> <li><p>Put that file inside the dist folder.</p></li> <li><p>Also copy over all the necessary HTML, CSS and Vendor files to the dist folder.</p></li> </ol> <p>Once that is done you can open the Index.html file that is inside the dist file and your app should work in the browser.</p> <p>Of course i added some gulp plugins to watch that dist folder and when something changes in the code it will live-reload the browser.</p> <p>After i was done with it all i had to do is open the terminal and type in the command.</p> <div class="highlight shell"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class=lineno>1</pre></td><td class=code><pre>gulp
</pre></td></tr></tbody></table> </div> <p>It automatically opens a browser window for me with my app running live in it. saving a lot of time and effort.</p> <p>You can tell Gulp to do anything sky is the limit. It can even deploy the app for you if you want. I did not really get down to that part yet.</p> <p>All the instruction for Gulp must be set in the gulpfile.js that should reside in the root of your project folder.</p> <p>Lets get down to that code:</p> <div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class=lineno>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71</pre></td><td class=code><pre><span class="c1">// import Gulp</span>
<span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">);</span>
<span class="c1">// import the server for Gulp called gulp-connect</span>
<span class="kd">var</span> <span class="nx">connect</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-connect'</span><span class="p">);</span>
<span class="c1">// import browserify the code compiler.</span>
<span class="kd">var</span> <span class="nx">browserify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'browserify'</span><span class="p">);</span>
<span class="c1">// import babelify that transforms babel ES6 to browser readable code.</span>
<span class="kd">var</span> <span class="nx">babelify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"babelify"</span><span class="p">);</span>
<span class="c1">// reactify does almost the same as babelify but with more react stuff i guess.</span>
<span class="kd">var</span> <span class="nx">reactify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'reactify'</span><span class="p">);</span>
<span class="c1">// this one is needed by gulp to prevent writing of temporary files</span>
<span class="c1">// read this for more info: http://stackoverflow.com/questions/30794356/why-do-i-have-to-use-vinyl-source-stream-with-gulp</span>
<span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'vinyl-source-stream'</span><span class="p">);</span>
<span class="c1">// gulp open simply opens the browser window for you with the right url.</span>
<span class="kd">var</span> <span class="nx">open</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-open'</span><span class="p">);</span>

<span class="c1">// this is the server its task name is "connect".</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'connect'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">connect</span><span class="p">.</span><span class="nx">server</span><span class="p">({</span>
    <span class="na">root</span><span class="p">:</span> <span class="s1">'dist'</span><span class="p">,</span>
    <span class="na">livereload</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">port</span><span class="p">:</span> <span class="mi">3000</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="c1">// gulp watch is constantly monitoring the dist folder for changes its task name is "watch"</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'watch'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="s1">'dist/**/*.*'</span><span class="p">],</span> <span class="p">[</span><span class="s1">'html'</span><span class="p">]);</span>
<span class="p">});</span>

<span class="c1">// this one watches the main html for changes then calles the "connect" task to reload.</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'html'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'dist/*.html'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">connect</span><span class="p">.</span><span class="nx">reload</span><span class="p">());</span>
<span class="p">});</span>

<span class="c1">// "browserify" is the task responsible for transforming the code for the browser. and bundling it together inside the big main.js, finally putting it in the destination folder.</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'browserify'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">browserify</span><span class="p">(</span><span class="s1">'src/js/main.js'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="s2">"babelify"</span><span class="p">,</span> <span class="p">{</span><span class="na">presets</span><span class="p">:</span> <span class="p">[</span><span class="s2">"es2015"</span><span class="p">,</span> <span class="s2">"react"</span><span class="p">]})</span>
  <span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="s1">'reactify'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">bundle</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">source</span><span class="p">(</span><span class="s1">'main.js'</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'dist/js'</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// the "copy" task copies the neccery file needed for the app to function normally. (see step 4. above)</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'copy'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'src/index.html'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'dist'</span><span class="p">));</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'src/css/*.*'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'dist/css/'</span><span class="p">));</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'src/js/vendors/*.*'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'dist/js'</span><span class="p">));</span>
<span class="p">});</span>


<span class="c1">// this task "app" uses the gulp-open to open your browser with the right url in it.</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'app'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">uri</span><span class="p">:</span> <span class="s1">'http://localhost:3070'</span>
    <span class="p">};</span>
  <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="nx">__filename</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">open</span><span class="p">(</span><span class="nx">options</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// finally last but not least... this task.. executes all the tasks above 1 by 1. the final callback.</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,[</span><span class="s1">'connect'</span><span class="p">,</span> <span class="s1">'app'</span><span class="p">,</span> <span class="s1">'browserify'</span><span class="p">,</span><span class="s1">'copy'</span><span class="p">,</span><span class="s1">'watch'</span><span class="p">],</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s1">'src/**/*.*'</span><span class="p">,[</span><span class="s1">'browserify'</span><span class="p">,</span> <span class="s1">'copy'</span><span class="p">]);</span>
<span class="p">});</span>

</pre></td></tr></tbody></table> </div> <p>As you can see gulp code almost speaks for it self.</p> <p>Gulping from the src/source and piping down the dest/destination with some gulp tasks.</p> <div id=disqus_thread></div> <script>
        /**
        * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
        * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
        */
        /*
        var disqus_config = function () {
        this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        };
        */
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//khalilgharbaoui.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel=nofollow>comments powered by Disqus.</a></noscript> </div> </div> <div align=center style="width:100%;"> <div style="width: 280px; box-shadow: 0px 6px 10px rgba(8, 8, 8, 0.8); padding: 24px; background-color: #FDFDFD !important; float:right; clear:right;margin:20px auto 100px auto"> <div class=grid-item-footer-content> <h2>Tags</h2> <ul id=cloud> <li><a class=tag3 href="/tags/ruby/">Ruby (3)</a></li> <li><a class=tag1 href="/tags/html/">HTML (1)</a></li> <li><a class=tag1 href="/tags/css/">CSS (1)</a></li> <li><a class=tag1 href="/tags/git/">Git (1)</a></li> <li><a class=tag1 href="/tags/github/">Github (1)</a></li> <li><a class=tag1 href="/tags/terminal/">Terminal (1)</a></li> <li><a class=tag1 href="/tags/irb/">IRB (1)</a></li> <li><a class=tag1 href="/tags/reactjs/">ReactJS (1)</a></li> <li><a class=tag1 href="/tags/nodejs/">NodeJS (1)</a></li> <li><a class=tag1 href="/tags/flux/">Flux (1)</a></li> <li><a class=tag1 href="/tags/gulp/">Gulp (1)</a></li> <li><a class=tag1 href="/tags/jquery/">jQuery (1)</a></li> <li><a class=tag1 href="/tags/javascript/">JavaScript (1)</a></li> <li><a class=tag1 href="/tags/ajax/">AJAX (1)</a></li> <li><a class=tag1 href="/tags/json/">JSON (1)</a></li> <li><a class=tag1 href="/tags/restful-api/">RESTful API (1)</a></li> <li><a class=tag1 href="/tags/api/">API (1)</a></li> <li><a class=tag1 href="/tags/php/">PHP (1)</a></li> <li><a class=tag1 href="/tags/ruby-on-rails/">Ruby on Rails (1)</a></li> <li><a class=tag1 href="/tags/domain-moddeling/">Domain Moddeling (1)</a></li> <li><a class=tag1 href="/tags/diagrams/">Diagrams (1)</a></li> <li><a class=tag1 href="/tags/gems/">Gems (1)</a></li> <li><a class=tag1 href="/tags/graphviz/">Graphviz (1)</a></li> <li><a class=tag1 href="/tags/railroady/">railroady (1)</a></li> <li><a class=tag1 href="/tags/rails-erd/">rails-erd (1)</a></li> </ul> </div> </div> <div style="width: 280px; box-shadow: 0px 6px 10px rgba(8, 8, 8, 0.8); padding: 24px; background-color: #FDFDFD !important; float:left; clear:left;margin:20px auto 100px auto"> <div class=grid-item-footer-content> <h2>By Year</h2> <ul id=cloud> <li><a href="/2016/">2016 (4)</a></li> </ul> </div> </div> </div> <br/> <footer class=footer-box> <div class=social-footer> <ul> <li> <a href="https://ch.linkedin.com/in/khalilgharbaoui" target=_blank> <i class="fa fa-linkedin"></i> </a> </li> <li> <a href="https://github.com/khalilgharbaoui" target=_blank> <i class="fa fa-github"></i> </a> </li> <li> <a href="https://www.google.com/partners/?hl=en-GB#a_profile;idtf=7256334643;" target=_blank> <i class="fa fa-google"></i> </a> </li> <li> <a href="mailto:khalilgharbaoui@hotmail.com" target=_blank> <i class="fa fa-envelope-o"></i> </a> </li> </ul> ¬©2016 Khalil Gharbaoui </div> </footer> </body> </html>